
Setup repo {{{1

Create new repo with remote at BB
	git init <dir>
	git add . 
	git commit -m 'comment'
	git remote add origin ssh://git@bitbucket.org/andmalc/work.git
	git push -u origin --all # pushes up the repo and its refs for the first time
	git mv	

	git commit -a  #all changes in working directory
	git push -u origin master

Info {{{1

Status 
	-sb				short form
					left column is staged, right column is modified

Log
	-#				number of commits to show
	 -p				show diffs	
	 --grep			matching string
	 --stat			short summary of files and changes
	 --decorate --graph --oneline --all
	 <path>			show commits with this file

Diff
	no arg				changed but not staged
	--staged		changes staged
	--cached		same as --staged
	<branch> <remote name>/<branch>
	-- <file>		working tree vs. commit
	--cached -- <file>	working tree vs. staged

	difftool			show diff in vim etc.

Show tracked files
	ls-files

Commit {{{1

	commit -v			show diff in commit message
	commit -a			commit all tracked files

Branches {{{1

branch <name>	create new branch but don't switch to it	    	   
checkout -b <name>	create new branch <name> and switch to it
show-branch show all changes in branch
branch -r	show remote tracking branches
branch -a	show local and remote tracking branches

git branch -rd <remote>/<branch>
			Remove remote branch if error

Remote repos
	clone		create new local repo, remote tracking branch is auto-created
	fetch		pull remote changes to remote tracking branch
	pull		pull remote changes to remote tracking branch and start merge = fetch+merge
	push <repo> upload changes to remote.  Default repo is origin

Subtrees
	Setup
		git remote add -f {remote_name} {repository_url}
		git subtree add --prefix={path/to/subdir} {remote} [branch] --squash
	Pull changes
		 git fetch {remote}
		 git subtree pull --prefix={path/to/subdir} {remote} [branch] --squash

Revert
	reset --hard HEAD	revert all changes incl. working dir. 
	rebase	?	 

Merging {{{1

	merge --abort	abandon merge - what happens to uncommited changes?
	merge -Xignore-all-space or -Xignore-space-change - ignore whitespace changes


File management {{{1

Moves files		mv
Remove files
	rm		Deletes file/directory
	rm --cached		Untracks files/directoires

Ignore files
	if already indexed:
		git update-index --assume-unchanged
	add to .gitignore

Utilities {{{1

vcsh	manage multiple repos
		http://goo.gl/t2xCne
	init
	list
	enter

Setup config on new machine
	sudo apt-get install vcsh git mr
	vcsh enter config
	git remote add origin ssh://git@bitbucket.org/andmalc/config.git
	git pull -u origin master

Git Config {{{1

[user]
   email = andmalc@gmail.com
   name = andmalc
[core]
   pager = less -r
[status]
	showUntrackedFiles = no
~
